<div class="min-h-screen bg-gray-50 flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md w-full mx-auto">

    <div class="text-center mb-8">
      <h1 class="text-3xl font-extrabold text-gray-900">{{ 'resetPassword.resetPassword' | translate }}</h1>
      <p class="text-gray-500 mt-2">{{ 'resetPassword.followSteps' | translate }}</p>
    </div>

    @if (errorMessage()) {
      <div class="bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded-xl animate-shake">
        <p class="text-sm font-bold">{{ errorMessage() }}</p>
      </div>
    }

    <div class="bg-white p-8 rounded-[2rem] shadow-xl border border-gray-100">

      @if (step() === 1) {
        <form [formGroup]="forgotForm" (ngSubmit)="submitEmail()" class="space-y-6">
          <div>
            <label class="block text-sm font-bold text-gray-700 mb-2">{{ 'resetPassword.enterEmail' | translate }}</label>
            <input formControlName="email" type="email" class="w-full px-4 py-3.5 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:border-green-500 outline-none transition-all" [placeholder]="'resetPassword.emailPlaceholder' | translate">
          </div>
          <button [disabled]="forgotForm.invalid || isLoading()" type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-2xl shadow-lg transition-all disabled:bg-gray-300">
            {{ isLoading() ? ('resetPassword.sending' | translate) : ('resetPassword.sendResetCode' | translate) }}
          </button>
        </form>
      }

      @if (step() === 2) {
        <form [formGroup]="verifyForm" (ngSubmit)="submitCode()" class="space-y-6">
          <div>
            <label class="block text-sm font-bold text-gray-700 mb-2">{{ 'resetPassword.enterResetCode' | translate }}</label>
            <input formControlName="resetCode" type="text" class="w-full px-4 py-3.5 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:border-green-500 outline-none transition-all text-center tracking-widest text-xl font-bold" [placeholder]="'resetPassword.codePlaceholder' | translate">
          </div>
          <button [disabled]="verifyForm.invalid || isLoading()" type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-2xl shadow-lg transition-all">
            {{ isLoading() ? ('resetPassword.verifying' | translate) : ('resetPassword.verifyCode' | translate) }}
          </button>
        </form>
      }

      @if (step() === 3) {
        <form [formGroup]="resetForm" (ngSubmit)="submitNewPassword()" class="space-y-6">
          <div>
            <label class="block text-sm font-bold text-gray-700 mb-2">{{ 'resetPassword.newPassword' | translate }}</label>
            <input formControlName="newPassword" type="password" class="w-full px-4 py-3.5 bg-gray-50 border-2 border-gray-100 rounded-2xl focus:border-green-500 outline-none transition-all" placeholder="••••••••">
          </div>
          <button [disabled]="resetForm.invalid || isLoading()" type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-2xl shadow-lg transition-all">
            {{ isLoading() ? ('resetPassword.updating' | translate) : ('resetPassword.resetPasswordBtn' | translate) }}
          </button>
        </form>
      }

    </div>
  </div>
</div>
