<div class="group relative bg-white rounded-[2rem] sm:rounded-[2.5rem] border border-gray-100 p-3 sm:p-4 md:p-5 transition-all duration-500 hover:shadow-[0_30px_60px_rgba(22,163,74,0.12)] hover:-translate-y-3">

  <div class="relative overflow-hidden rounded-[1.5rem] sm:rounded-[2rem] bg-gray-50 aspect-[4/5] flex items-center justify-center border border-gray-50 shadow-inner">
    <img [src]="product.imageCover"
         [routerLink]="['/product-datails', product.id]"
         class="w-full h-full object-contain p-3 sm:p-4 md:p-6 transform transition-transform duration-700 group-hover:scale-110 cursor-pointer"
         [alt]="product.title" />

    <div class="absolute top-2 right-2 sm:top-4 sm:right-4 flex flex-col gap-1.5 sm:gap-2">
      <button (click)="toggleWishlist(product.id)"
              [disabled]="isLoadingWishlist()"
              class="p-2.5 sm:p-3.5 bg-white/80 backdrop-blur-xl rounded-xl sm:rounded-2xl shadow-md transition-all duration-300 hover:bg-white hover:scale-110 disabled:opacity-50 group/wish">

        @if (isLoadingWishlist()) {
          <i class="fas fa-circle-notch fa-spin text-green-600 text-xs sm:text-sm"></i>
        } @else {
          <svg class="w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 transition-colors duration-300"
               [attr.fill]="isInWishlist() ? '#ef4444' : 'none'"
               [class.text-red-500]="isInWishlist()"
               [class.text-gray-300]="!isInWishlist()"
               stroke="currentColor"
               viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z">
            </path>
          </svg>
        }
      </button>
    </div>

    <div class="absolute bottom-2 left-2 sm:bottom-4 sm:left-4">
      <span class="text-[9px] sm:text-[11px] font-black text-green-700 uppercase tracking-[0.1em] sm:tracking-[0.15em] bg-white/90 backdrop-blur-md px-2 py-1 sm:px-3 sm:py-1.5 rounded-lg sm:rounded-xl shadow-sm border border-white/50">
        {{ product.category.name }}
      </span>
    </div>
  </div>
  <div class="px-0.5 sm:px-1 mt-3 sm:mt-4 md:mt-6 cursor-pointer" [routerLink]="['/product-datails', product.id]">
    <div class="flex justify-between items-center mb-2 sm:mb-3">
      <div class="flex items-center gap-1 sm:gap-1.5 bg-yellow-400/10 px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded-lg">
        <i class="fas fa-star text-yellow-500 text-[10px] sm:text-xs"></i>
        <span class="text-gray-800 text-[10px] sm:text-xs font-black">{{ product.ratingsAverage }}</span>
      </div>
      <span class="text-[8px] sm:text-[11px] font-bold text-gray-400 uppercase tracking-tighter">New Collection</span>
    </div>

    <h3 class="text-gray-900 font-extrabold text-base sm:text-lg md:text-xl mb-1.5 sm:mb-2 line-clamp-1 group-hover:text-green-600 transition-colors tracking-tight">
      {{ product.title }}
    </h3>
  </div>

  <div class="flex justify-between items-end mt-3 sm:mt-4 md:mt-6 mb-1 px-0.5 sm:px-1">
    <div>
      <span class="text-[10px] sm:text-[12px] text-gray-400 block font-bold uppercase tracking-widest mb-0.5 sm:mb-1">Price</span>
      <div class="flex items-baseline gap-0.5 sm:gap-1">
        <span class="text-lg sm:text-xl md:text-2xl font-black text-gray-900 tracking-tighter">
          {{ product.price }}
        </span>
        <span class="text-[10px] sm:text-sm font-bold text-green-600 uppercase">EGP</span>
      </div>
    </div>

    <button (click)="addProductItemToCart(product.id)"
            [disabled]="isLoadingCart()"
            class="relative flex items-center justify-center overflow-hidden h-10 w-10 sm:h-12 sm:w-12 md:h-14 md:w-14 bg-green-600 text-white rounded-xl sm:rounded-[1.5rem] shadow-lg sm:shadow-xl shadow-green-200 transition-all duration-500 hover:bg-black hover:shadow-black/20 hover:w-20 sm:hover:w-28 md:hover:w-32 disabled:bg-gray-200 active:scale-95 group/btn">

      @if (isLoadingCart()) {
        <i class="fas fa-circle-notch fa-spin text-base sm:text-lg md:text-xl"></i>
      } @else {
        <div class="flex items-center gap-1 sm:gap-2 md:gap-3 transition-all duration-300">
          <svg class="w-5 h-5 sm:w-6 sm:h-6 md:w-7 md:h-7 transition-all duration-500 group-hover/btn:rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M12 4v16m8-8H4"></path>
          </svg>
          <span class="hidden group-hover/btn:block text-xs sm:text-sm md:text-base font-black whitespace-nowrap opacity-0 group-hover/btn:opacity-100 transition-all">Add</span>
        </div>
      }
    </button>
  </div>
</div>
